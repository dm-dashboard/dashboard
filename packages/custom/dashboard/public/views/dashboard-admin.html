
<div ng-controller="DashboardAdminController as vm">
    <h2>Dashboards Admin</h2>

    <div ng-if="vm.allDashboards.length === 0">No dashboards configured</div>
    <table class="table table-striped" ng-if="vm.allDashboards.length > 0">
        <tr>
            <th>Name</th>
            <th>Rotation Cycle Time</th>
            <th>Pages</th>
            <th>&nbsp;</th>
        </tr>
        <tr ng-repeat="dash in vm.allDashboards">
            <td>{{dash.name}}</td>
            <td>{{dash.totalSecondsPerCycle}}s</td>
            <td>
                <ol>
                    <li ng-repeat="page in dash.pages">
                        <div>Time in cycle: {{vm.secondsPerPage(page,dash)}}</div>
                        <div>
                            Widgets:
                            <ul>
                                <li ng-repeat="widget in page.widgets">
                                    {{widget.name || widget.directive}}
                                </li>
                            </ul>
                        </div>

                    </li>
                </ol>
            </td>
            <td>
                <div class="btn-group">
                    <a class="btn btn-xs btn-primary" ng-click="vm.editDashboard(dash)">Edit</a>
                    <a class="btn btn-xs btn-warning" ng-click="vm.deleteDashboard(dash)">Delete</a>
                    <a class="btn btn-xs btn-default" href="#!/dashboard/{{dash.dashboardId}}"
                       target="_blank">View in new tab</a>
                </div>
            </td>
        </tr>
    </table>
    <div class="btn-group">
        <a class="btn btn-default btn-primary" ng-click="vm.addDashboard()">Add New Dashboard</a>
    </div>
</div>


